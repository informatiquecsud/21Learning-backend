(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"57a5":function(e,n,s){"use strict";s.r(n);var t=function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("div",[s("q-card",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[s("q-expansion-item",{attrs:{"expand-separator":"",label:"Grading options","header-style":{backgroundColor:"#ddd"}},model:{value:e.gradingOptions.expanded,callback:function(n){e.$set(e.gradingOptions,"expanded",n)},expression:"gradingOptions.expanded"}},[s("q-list",[s("q-item",[s("q-item-section",{style:{minWidth:"70px"},attrs:{side:!0}},[e._v("Type")]),s("q-item-section",[s("div",{staticClass:"q-gutter-md"},e._l(e.gradingTypes,(function(n,t){return s("q-radio",{key:t,attrs:{val:t,label:n.label},model:{value:e.gradingOptions.type,callback:function(n){e.$set(e.gradingOptions,"type",n)},expression:"gradingOptions.type"}})})),1)])],1),s("q-separator",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]})],1)],1)],1),s("Grade"+e.gradingOptions.type,{tag:"component",staticClass:"q-mt-md"})],1)},a=[],i=function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("div",[s("q-card",[s("q-expansion-item",{attrs:{"expand-separator":"",label:"Question",caption:"Type: "+e.question.question_type,"header-style":{backgroundColor:"#ddd"}},model:{value:e.isQuestionExpanded,callback:function(n){e.isQuestionExpanded=n},expression:"isQuestionExpanded"}},[s("div",{staticClass:"q-pa-md",domProps:{innerHTML:e._s(e.questionText.html)}})])],1),e.loading?e._e():s("q-list",{staticClass:"rounded-borders q-mt-lg",attrs:{bordered:""}},e._l(e.submissions,(function(n){return s("q-expansion-item",{key:n.username,staticClass:"q-my-none",attrs:{"expand-separator":"",label:n.firstName+" "+n.lastName+" ("+n.username+")",caption:""+(n.answers[0]&&n.answers[0].timestamp||"No answer found"),"header-style":{backgroundColor:e.submissionHeaderStyle(n),fontSize:"1.3em"}},model:{value:e.submissionsExpanded,callback:function(n){e.submissionsExpanded=n},expression:"submissionsExpanded"}},[s("q-card",[s("q-card-section",{attrs:{horizontal:""}},[s("q-card-section",[s("pre",[e._v("            "+e._s(n.answers[0]&&n.answers[0].act||"")+"\n            ")])])],1),s("q-card-section",[n.grades.length>0?s("q-rating",{attrs:{size:"1.8em",icon:"thumb_up",max:6},model:{value:n.grades[0].score,callback:function(s){e.$set(n.grades[0],"score",s)},expression:"submission.grades[0].score"}}):e._e()],1)],1)],1)})),1)],1)},r=[],o=(s("7f7f"),s("28a5"),s("a481"),s("d624")),d=s.n(o),u=s("9530"),c=s.n(u);function l(){var e=d()(["\n  query getQuestionSrcByQuestionId($coursename: String!, $divId: String!) {\n    questions(\n      where: {\n        name: { _eq: $divId }\n        base_course_object: {\n          child_courses: { course_name: { _eq: $coursename } }\n        }\n      }\n    ) {\n      question_type\n      rst: question\n      html: htmlsrc\n      subchapter\n      chapter\n    }\n  }\n"]);return l=function(){return e},e}function m(){var e=d()(['\n  query getSubmissionsByQuestionId($coursenames: [String!], $divId: String!) {\n    submissions: auth_user(\n      order_by: { first_name: asc }\n      where: {\n        _and: { course_name: { _in: $coursenames }, active: { _eq: "T" } }\n      }\n    ) {\n      username\n      firstName: first_name\n      lastName: last_name\n      grades: question_grades(where: { div_id: { _eq: $divId } }) {\n        score\n        comment\n      }\n      answers: useinfos(\n        order_by: { timestamp: desc }\n        limit: 5\n        where: { div_id: { _eq: $divId } }\n      ) {\n        id\n\n        timestamp\n        event\n        act\n      }\n    }\n  }\n']);return m=function(){return e},e}var p=c()(m()),g=c()(l()),q={name:"GradeOneQManyStu",data:function(){return{isQuestionExpanded:!0,questions:[],submissions:[],submissionsExpanded:!0}},computed:{loading:function(){return this.$apollo.loading},question:function(){return this.questions&&this.questions[0]},questionId:function(){return this.$route.params.questionId},questionText:function(){return{rst:this.question.rst.split("\n").slice(1).join("\n").replace("\n\n","<br />"),html:this.question.html}}},methods:{submissionHeaderStyle:function(e){return e.answers.length>0?"#d9d9d9":"#daa"}},apollo:{questions:{query:g,variables:function(){var e=this.$store.getters["dataFilters/getFirstSelectedCourse"].name||"";return{coursename:e,divId:this.questionId}}},submissions:{query:p,variables:function(){return{coursenames:this.$store.state.dataFilters.courses||[],divId:this.questionId}}}}},b=q,h=s("2877"),f=s("eebe"),v=s.n(f),y=s("f09f"),_=s("3b73"),x=s("1c1c"),Q=s("a370"),w=s("daf4"),$=Object(h["a"])(b,i,r,!1,null,null,null),O=$.exports;v()($,"components",{QCard:y["a"],QExpansionItem:_["a"],QList:x["a"],QCardSection:Q["a"],QRating:w["a"]});var S=function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("div",[e._v("My component")])},I=[],E={data:function(){return{}}},k=E,C=Object(h["a"])(k,S,I,!1,null,null,null),T=C.exports,M={name:"Grading",components:{GradeOneQManyStu:O,GradeOneStuManyQ:T},data:function(){return{gradingTypes:{OneQManyStu:{label:"One question / many students"},OneStuManyQ:{label:"One student / many questions"}},gradingOptions:{expanded:!0,type:""}}},computed:{},mounted:function(){this.gradingOptions.type=this.$route.params.gradingType},watch:{gradingOptions:{deep:!0,handler:function(e){var n=e.type;console,this.$router.push({params:{gradingType:n}})}}}},N=M,G=s("66e5"),j=s("4074"),z=s("3786"),F=s("eb85"),H=Object(h["a"])(N,t,a,!1,null,null,null);n["default"]=H.exports;v()(H,"components",{QCard:y["a"],QExpansionItem:_["a"],QList:x["a"],QItem:G["a"],QItemSection:j["a"],QRadio:z["a"],QSeparator:F["a"]})}}]);