(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{8265:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{attrs:{view:"hHh LpR fFf"}},[a("q-header",{attrs:{elevated:"","height-hint":"98"}},[a("div",{staticClass:"row no-wrap shadow-1"},[a("q-toolbar",[a("q-btn",{attrs:{flat:"",round:"",icon:"menu"},on:{click:function(t){e.left=!e.left}}}),a("q-toolbar-title",[e._v("Teacher dashboard")])],1),a("q-toolbar",{staticClass:"col-4 bg-primary text-white"},[a("q-space"),e._e(),a("q-btn",{attrs:{flat:"",round:"",icon:"menu"},on:{click:function(t){e.drawerRight=!e.drawerRight}}})],1)],1),a("q-tabs",{attrs:{align:"left"}},e._l(e.courses,(function(e){return a("q-route-tab",{key:e.id,attrs:{to:"/course/"+e.name,label:e.name,ripple:!0,dense:""}})})),1)],1),a("q-drawer",{attrs:{"show-if-above":"",elevated:"",side:"left",bordered:"","content-class":"bg-grey-3"},model:{value:e.left,callback:function(t){e.left=t},expression:"left"}},[a("q-scroll-area",{staticClass:"fit",attrs:{visible:!1}},[a("q-list",[e._e(),a("q-item-label",{attrs:{header:""}},[e._v("Commands")]),e._l(e.commands,(function(t){return a("q-item",{key:t.icon,attrs:{clickable:"",tag:"a",to:t.to}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:t.icon}})],1),a("q-item-section",[a("q-item-label",[e._v(e._s(t.title))]),a("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.description))])],1)],1)})),a("q-item-label",{attrs:{header:""}},[e._v("Under developement")]),e._l(e.devCommands,(function(t){return a("q-item",{key:t.icon,attrs:{clickable:"",tag:"a",to:t.to}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:t.icon}})],1),a("q-item-section",[a("q-item-label",[e._v(e._s(t.title))]),a("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.description))])],1)],1)}))],2)],1)],1),a("q-drawer",{attrs:{side:"right","show-if-above":"",bordered:"",width:400,breakpoint:500,"content-class":"bg-grey-3"},model:{value:e.drawerRight,callback:function(t){e.drawerRight=t},expression:"drawerRight"}},[a("data-filter")],1),a("q-page-container",[a("router-view")],1),a("q-footer",{staticClass:"bg-grey-8 text-white",attrs:{elevated:""}},[a("q-toolbar",[a("q-toolbar-title",[e._v("Stats:")])],1)],1)],1)},s=[],r=(a("7f7f"),a("d624")),o=a.n(r),i=a("9530"),c=a.n(i),l=Object.freeze(["\n          query chaptersByCourse($baseCourses: [String!]) {\n            chapters(\n              where: { course_id: { _in: $baseCourses } }\n              order_by: { course_id: asc, chapter_num: asc }\n            ) {\n              id\n              chapter_name\n              chapter_label\n\n              chapter_num\n              course_id\n              subChapters: sub_chapters {\n                id\n\n                text: sub_chapter_name\n                name: sub_chapter_label\n                num: sub_chapter_num\n              }\n            }\n          }\n        "]),u=Object.freeze(["\n            query studentsInCourses(\n              $courses: [String!]\n              $activeStatus: bpchar!\n            ) {\n              students: auth_user(\n                order_by: { first_name: asc, last_name: asc }\n                where: {\n                  _and: {\n                    active: { _eq: $activeStatus }\n                    course_name: { _in: $courses }\n                  }\n                }\n              ) {\n                id\n                username\n                firstName: first_name\n                lastName: last_name\n              }\n            }\n          "]),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-list",[a("q-item-label",{attrs:{header:""}},[e._v("Time span")]),a("q-item",{staticClass:"q-mr-lg"},[a("q-slider",{staticClass:"q-ml-lg",style:{zIndex:20},attrs:{min:1.75,max:20,step:1,label:"","label-always":"","label-value":"Scale: "+Math.floor(Math.pow(e.timeUnit,3))+" sec"},model:{value:e.timeUnit,callback:function(t){e.timeUnit=t},expression:"timeUnit"}})],1),a("q-item",{staticClass:"q-mx-lg"},[a("q-range",{attrs:{min:e.timeSpan.bounds.min,max:e.timeSpan.bounds.max,"label-always":"","left-label-value":e.humanize(e.timeSpan.selected.min),"right-label-value":e.humanize(e.timeSpan.selected.max),"left-label-color":"pink","right-label-color":"purple"},model:{value:e.timeSpan.selected,callback:function(t){e.$set(e.timeSpan,"selected",t)},expression:"timeSpan.selected"}})],1),a("q-item",[a("q-badge",{staticClass:"q-ma-xs",attrs:{color:"pink"}},[e._v("\n        From: "+e._s(this.dateFrom)+"\n      ")]),a("q-space"),a("q-badge",{staticClass:"q-ma-xs",attrs:{color:"purple"}},[e._v("\n        To: "+e._s(this.dateTo)+"\n      ")])],1),a("q-item",[a("q-select",{style:{width:"100%"},attrs:{label:"Courses",multiple:"",options:e.view.myCourses.map((function(e){return e.name})),"use-chips":""},model:{value:e.courses,callback:function(t){e.courses=t},expression:"courses"}})],1),a("q-item",[a("apollo-query",{style:{width:"100%"},attrs:{query:function(e){return e(u)},variables:{courses:e.courses,activeStatus:"T"}},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.result,s=n.loading,r=n.error,o=n.data;return[r?a("div",[e._v("Error loading students")]):o?a("select-filter",{attrs:{label:"Students",loading:s,clearable:"",counter:"",options:o.students,"option-label":function(e){return e.firstName+" "+e.lastName[0]+"."},"option-value":function(e){return e},"input-debounce":"2000",multiple:"","use-chips":""},model:{value:e.students,callback:function(t){e.students=t},expression:"students"}}):e._e()]}}])})],1),a("apollo-query",{attrs:{query:function(e){return e(l)},variables:{baseCourses:e.baseCourses}},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.result,s=(n.loading,n.error,n.data);return[a("q-item",[a("select-filter",{style:{width:"100%"},attrs:{label:"Chapter",options:s&&s.chapters||[],"option-label":function(e){return e.course_id+"/"+e.chapter_num+"."+e.chapter_name},"option-value":function(e){return e},"input-debounce":"2000"},model:{value:e.chapters,callback:function(t){e.chapters=t},expression:"chapters"}})],1),a("q-item",[a("select-filter",{style:{width:"100%"},attrs:{label:"Subchapters",options:e.chapters.length>1||0==e.chapters.length?[]:e.chapters[0].subChapters,"option-label":function(e){return e.num+". "+e.name},"option-value":function(e){return e},"input-debounce":"2000"},model:{value:e.subChapters,callback:function(t){e.subChapters=t},expression:"subChapters"}})],1)]}}])}),e._e()],1)],1)},d=[],p=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("c47a")),h=a.n(p),b=a("bd4c"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-select",e._b({ref:"filterInput",style:{width:"100%"},attrs:{label:e.label,clearable:"",counter:"",options:e.options,"input-debounce":"2000",multiple:"","use-chips":""},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"q-select",Object.assign({},e.$props,e.$attrs),!1))],1)},v=[],_={props:{label:{type:String,required:!0},options:{type:Array,required:!0},value:{type:Array,required:!0}},data:function(){return{model:this.value}},mounted:function(){this.emitValue()},watch:{model:function(){this.emitValue()}},methods:{emitValue:function(){var e=this;setTimeout((function(){e.$emit("input",e.model||[])}),30)}}},g=_,y=a("2877"),q=a("eebe"),w=a.n(q),S=a("ddd8"),C=Object(y["a"])(g,f,v,!1,null,null,null),$=C.exports;w()(C,"components",{QSelect:S["a"]});var x=a("2f62");function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(a,!0).forEach((function(t){h()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var F={components:{SelectFilter:$},data:function(){return{timeUnit:this.$store.state.dataFilters.defaultTimespanScale,timeSpan:{bounds:{min:-720,max:0},selected:{max:0,min:-3600/Math.pow(this.$store.state.dataFilters.defaultTimespanScale,3)}}}},watch:{timestampFrom:function(e){this.$store.commit("dataFilters/setTimeRangeFrom",e)},timestampTo:function(e){this.$store.commit("dataFilters/setTimeRangeTo",e)},$route:function(){this.$store.commit("dataFilters/setCourses",[this.$route.params.courseName]),this.$store.commit("dataFilters/setStudents",[])}},computed:k({},Object(x["c"])(["dataFilters"]),{},Object(x["c"])(["view"]),{},Object(x["b"])("dataFilters",["baseCourses"]),{coursesChoice:function(){var e=this.$route.params.courseName;return[e]},courses:{set:function(e){this.$store.commit("dataFilters/setCourses",e)},get:function(){return this.$store.state.dataFilters.courses}},students:{set:function(e){this.$store.commit("dataFilters/setStudents",e)},get:function(){return this.$store.state.dataFilters.students}},chapters:{set:function(e){this.$store.commit("dataFilters/setChapters",e)},get:function(){return this.$store.state.dataFilters.chapters}},subChapters:{set:function(e){this.$store.commit("dataFilters/setSubChapters",e)},get:function(){return this.$store.state.dataFilters.subChapters}},timestampFrom:function(){var e=new Date;return b["a"].addToDate(e,{seconds:this.timeSpanToSeconds(this.timeSpan.selected.min)})},timestampTo:function(){var e=new Date;return b["a"].addToDate(e,{seconds:this.timeSpanToSeconds(this.timeSpan.selected.max)+600})},dateFrom:function(){return b["a"].formatDate(this.timestampFrom,"DD MMMM, HH:mm")},dateTo:function(){return b["a"].formatDate(this.timestampTo,"DD MMMM, HH:mm")}}),mounted:function(){this.$store.commit("dataFilters/setCourses",[this.$route.params.courseName])},methods:{timeSpanToSeconds:function(e){return e*Math.floor(Math.pow(this.timeUnit,3))},humanize:function(e){var t,a,n,s;return s=-this.timeSpanToSeconds(e),t=Math.floor(s/86400),s%=86400,a=Math.floor(s/3600),s%=3600,n=Math.floor(s/60),0!==t?"- ".concat(t,"d ").concat(a,"h"):"- ".concat(a,"h ").concat(n,"min")}}},O=F,Q=a("1c1c"),j=a("0170"),D=a("66e5"),M=a("c1d0"),P=a("7bbf"),I=a("58a8"),N=a("2c91"),R=Object(y["a"])(O,m,d,!1,null,null,null),H=R.exports;function z(){var e=o()(['\n        query myCourses {\n          courses(order_by: { course_name: asc }) {\n            id\n            name: course_name\n            baseCourse: base_course\n            students: auth_users(\n              order_by: { first_name: asc, last_name: asc }\n              where: {\n                active: { _eq: "T" }\n                # trick to filter the instructors out\n                _not: {\n                  course_instructors: { auth_user: { username: { _gt: "" } } }\n                }\n              }\n            ) {\n              firstName: first_name\n              lastName: last_name\n              username\n              id\n              active\n              courseName: course_name\n              email\n              course_instructors {\n                auth_user {\n                  username\n                }\n              }\n              __typename\n            }\n            __typename\n          }\n        }\n      ']);return z=function(){return e},e}w()(R,"components",{QList:Q["a"],QItemLabel:j["a"],QItem:D["a"],QSlider:M["a"],QRange:P["a"],QBadge:I["a"],QSpace:N["a"],QSelect:S["a"]});var L={components:{DataFilter:H},data:function(){return{left:!1,drawerRight:!1,courses:[],text:"",commands:[{title:"Last errors",to:{name:"courseLastErrors"},description:"Displays the n last errors in course",icon:"error"},{title:"Activity Overview",to:{name:"courseActivityOverview"},description:"Course activity overview on a given time span",icon:"bar_chart"},{title:"Programming Playground",to:{name:"progPlayground"},description:"Try anything in this programming playground",icon:"code"},{title:"Activecode Course Overview",to:{name:"acCourseOverviewHome"},description:"Quickly inspect your student's programms",icon:"search"},{title:"Student Progress",to:{name:"studentProgress"},description:"Track your student's progress accross chapters",icon:"school"}],devCommands:[{title:"Grading",to:{name:"grading"},description:"Grade your student's work",icon:"thumbs_up_down"},{title:"Code History",to:{name:"codeHistoryIndex"},description:"Retrieve a student's code history for a coding activity",icon:"history"},{title:"Showcase",to:{name:"ShowCaseIndex"},description:"Showcase components under developement",icon:"puzzle-piece"},{title:"Component Playground",to:{name:"ComponentPlayground"},description:"Playground for component building",icon:"build"}]}},mounted:function(){},apollo:{getCourses:{query:c()(z()),variables:{},result:function(e){var t=e.data;this.courses=t.courses.filter((function(e){return e.name!==e.base_course})),this.$store.commit("view/setMyCourses",t.courses),this.$route.params.courseName||this.$router.push({name:"courseIndex",params:{courseName:this.courses[0].name}})}}}},E=L,U=a("4d5a"),A=a("e359"),B=a("65c6"),V=a("9c40"),G=a("6ac5"),J=a("429b"),K=a("7867"),W=a("9404"),X=a("4983"),Y=a("27f9"),Z=a("0016"),ee=a("4074"),te=a("09e3"),ae=a("7ff0"),ne=Object(y["a"])(E,n,s,!1,null,null,null);t["default"]=ne.exports;w()(ne,"components",{QLayout:U["a"],QHeader:A["a"],QToolbar:B["a"],QBtn:V["a"],QToolbarTitle:G["a"],QSpace:N["a"],QTabs:J["a"],QRouteTab:K["a"],QDrawer:W["a"],QScrollArea:X["a"],QList:Q["a"],QInput:Y["a"],QIcon:Z["a"],QItemLabel:j["a"],QItem:D["a"],QItemSection:ee["a"],QPageContainer:te["a"],QFooter:ae["a"]})}}]);