(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"4cf9":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.chapters.map((function(e){return e.subChapters}))[0],(function(t){return n("sub-chapter-progress",{key:t.name,attrs:{subChapter:t,students:e.selectedStudents}})})),1)},a=[],s=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("06db"),n("456d"),n("c47a")),i=n.n(s),o=n("d624"),u=n.n(o),c=n("9530"),l=n.n(c),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"text-h6 q-mb-md"},[e._v("\n    "+e._s(e.subChapter.name)+"\n    "),n("q-badge",{attrs:{align:"top"}},[e._v("\n      "+e._s(e.subChapter.label)+"\n    ")])],1),n("q-table",{staticClass:"progress-table q-mb-lg",attrs:{separator:"cell","table-header-style":{backgroundColor:"rgb(90, 90, 90, 11)",color:"rgb(255, 255, 255, 1)"},pagination:e.tableConfig.pagination,data:e.subChapter.questions,columns:e.columns,"no-data-label":"No question found in this subchapter"},on:{"update:pagination":function(t){return e.$set(e.tableConfig,"pagination",t)}},scopedSlots:e._u([{key:"header-cell",fn:function(t){return[n("q-th",{attrs:{props:t}},["activity_id"!==t.col.name&&"question_type"!==t.col.name?n("router-link",{staticClass:"q-pa-none",attrs:{tag:"div",to:e.linkStudentExercices({username:t.col.name,subchapter:e.subChapter})}},[n("q-icon",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"q-ma-none",attrs:{name:"link",size:"1.5em"}}),e._v("\n          "+e._s(t.col.label)+"\n        ")],1):n("div",[e._v("\n          "+e._s(t.col.label)+"\n        ")])],1)]}}])})],1)},d=[],b=n("4db1"),h=n.n(b);function m(){var e=u()(['\n        query studentProgressionInChapter(\n          $usernames: [String!]\n          $subChapters: [String!]\n          $chapters: [String!]\n        ) {\n          studentProgress: auth_user(\n            order_by: { first_name: asc, last_name: asc }\n            where: {\n              _and: { active: { _eq: "T" }, username: { _in: $usernames } }\n            }\n          ) {\n            id\n            username\n            first_name\n            last_name\n            useinfos(\n              where: {\n                _and: {\n                  question: {\n                    subchapter: { _in: $subChapters }\n                    chapter: { _in: $chapters }\n                  }\n                }\n              }\n              order_by: { question: { timestamp: asc } }\n            ) {\n              div_id\n              timestamp\n              event\n              act\n              question {\n                id\n                name\n                chapter\n                subchapter\n                timestamp\n                question_type\n              }\n            }\n          }\n        }\n      ']);return m=function(){return e},e}var f={name:"SubChapterProgress",props:{subChapter:{type:Object,required:!0},students:{type:Object,required:!0}},data:function(){return{error:void 0,loading:!1,studentProgress:[],tableConfig:{pagination:{rowsPerPage:0}},baseColumns:[{name:"activity_id",label:"ID",field:function(e){var t=e.div_id;return t.length>15?"...".concat(t.slice(t.length-15)):t},align:"left",style:"width: 130px"},{name:"question_type",label:"Type",field:"question_type",align:"left",style:"width: 100px"}]}},apollo:{studentProgression:{query:l()(m()),variables:function(){return{usernames:this.$store.getters["dataFilters/selectedStudents"].map((function(e){return e.username})),subChapters:[this.subChapter.label]}},result:function(e){var t=e.data,n=e.loading,r=e.error;r?this.error=r:(this.loading=n,this.studentProgress=t.studentProgress)}}},computed:{columns:function(){var e=this;return[].concat(h()(this.baseColumns),h()(this.students.map((function(t){return{name:t.username,label:"".concat(t.firstName," ").concat(t.lastName.slice(0,1),"."),field:function(n){return"#tot: ".concat(e.interactionCount(t.username,n.div_id))},align:"left"}}))))}},methods:{linkStudentExercices:function(e){var t=e.username,n=e.subchapter;return"showcase/ListUserCodes?username=".concat(t,"&subchapter=").concat(n.label)},interactionCount:function(e,t){return this.studentProgress.filter((function(t){return t.username===e})).map((function(e){return e.useinfos.filter((function(e){return e.div_id===t})).length}))}}},g=f,_=(n("7bfb"),n("2877")),v=n("eebe"),y=n.n(v),C=n("58a8"),q=n("eaac"),S=n("357e"),w=n("0016"),$=Object(_["a"])(g,p,d,!1,null,null,null),O=$.exports;y()($,"components",{QBadge:C["a"],QTable:q["a"],QTh:S["a"],QIcon:w["a"]});var P=n("2f62");function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(){var e=u()(['\n  query getQuestionsByChapter(\n    $baseCourse: String!\n    $chapters: [String!]\n    $questionTypes: [String!]\n  ) {\n    chapters(\n      where: {\n        _and: {\n          course_id: { _like: $baseCourse }\n          chapter_name: { _in: $chapters }\n        }\n      }\n      order_by: { chapter_num: asc }\n    ) {\n      course {\n        course_name\n        base_course\n      }\n      num: chapter_num\n      name: chapter_name\n      label: chapter_label\n      subChapters: sub_chapters {\n        num: sub_chapter_num\n        label: sub_chapter_label\n        name: sub_chapter_name\n        questions(\n          where: {\n            _and: {\n              base_course: { _eq: $baseCourse }\n              question_type: { _in: $questionTypes }\n              name: { _like: "%" }\n            }\n          }\n          order_by: { timestamp: asc }\n        ) {\n          id\n          div_id: name # div_id\n          chapter\n          subchapter\n          question_type\n          timestamp\n        }\n      }\n    }\n  }\n']);return T=function(){return e},e}var F=l()(T()),x={name:"StudentProgress",components:{SubChapterProgress:O},data:function(){return{hideTitle:!1,questionTypes:[],chapters:[]}},computed:k({},Object(P["c"])(["dataFilters"]),{},Object(P["b"])({getCoursesByNames:"view/getCoursesByNames",getFirstSelectedCourse:"dataFilters/getFirstSelectedCourse",selectedStudents:"dataFilters/selectedStudents"})),apollo:{allQuestions:{query:F,variables:function(){var e=this.dataFilters.chapters;return{chapters:e.map((function(e){return e.chapter_name})),baseCourse:this.getFirstSelectedCourse.baseCourse,questionTypes:this.$store.getters["dataFilters/selectedQuestionTypes"].filter((function(e){return"page"!==e}))}},result:function(e){var t=e.data,n=e.loading,r=e.error;this.error=r,r||(this.loading=n,this.chapters=t.chapters)}}}},G=x,E=Object(_["a"])(G,r,a,!1,null,null,null);t["default"]=E.exports},"77be":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("iframe",{ref:"editorIFrame",attrs:{src:"/statics/webtj/",frameborder:"0",width:e.width,height:e.height}})])},a=[],s={props:{initialCode:{type:String,required:!1},width:{type:String,require:!0},height:{type:String,require:!0},autorun:{type:Boolean,required:!1}},data:function(){return{iframeGlobalSpace:null,$:null,test:"test data"}},mounted:function(){var e=this;this.iframe=this.$refs.editorIFrame;var t=setInterval((function(){if(e.iframeGlobalSpace=e.iframe.contentWindow,e.iframeGlobalSpace&&(e.ace=e.iframeGlobalSpace.ace,e.$=e.iframeGlobalSpace.$,e.Sk=e.iframeGlobalSpace.Sk,e.iframeGlobalSpace&&e.iframe&&e.$&&e.Sk)){var n=e.$("#editor")[0];e.editor=e.ace.edit(n),setTimeout((function(){e.editor.setValue(e.initialCode)}),500),clearInterval(t),e.autorun&&setTimeout((function(){e.iframeGlobalSpace.runProgram()}),1e3)}}),200)},updated:function(){}},i=s,o=n("2877"),u=Object(o["a"])(i,r,a,!1,null,null,null);t["a"]=u.exports},"7bfb":function(e,t,n){"use strict";var r=n("f535"),a=n.n(r);a.a},f535:function(e,t,n){}}]);