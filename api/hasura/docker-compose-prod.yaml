version: "3"
services:
  hasura:
    image: hasura/graphql-engine:v1.0.0-beta.8
    ports:
      - "8080"
    links:
      - db
    depends_on:
      - "db"
    network_mode: "bridge"
    restart: always
    environment:
      HASURA_GRAPHQL_DATABASE_URL: "postgres://runestone:${POSTGRES_PASSWORD}@db/runestone"
      HASURA_GRAPHQL_ENABLE_CONSOLE: "true" # set to "false" to disable console
      HASURA_GRAPHQL_ENABLED_LOG_TYPES: startup, http-log, webhook-log, websocket-log, query-log
      ## uncomment next line to set an admin secret
      HASURA_GRAPHQL_ADMIN_SECRET: "${HASURA_ADMIN_SECRET_KEY}"
      VIRTUAL_HOST: "api.${RUNESTONE_HOST}"
      LETSENCRYPT_HOST: "api.${RUNESTONE_HOST}"
      LETSENCRYPT_EMAIL: "cedonner@gmail.com"
